# AI Stories Backend API

Backend API –¥–ª—è AI Stories - –ø–ª–∞—Ç—Ñ–æ—Ä–º–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—ñ–∑–æ–≤–∞–Ω–∏—Ö AI-—ñ—Å—Ç–æ—Ä—ñ–π —Ç–∞ –º–µ–¥–∏—Ç–∞—Ü—ñ–π.

## üöÄ –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å

### ü§ñ AI –ê—Å–∏—Å—Ç–µ–Ω—Ç–∏

- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è AI-–∞—Å–∏—Å—Ç–µ–Ω—Ç–∞–º–∏ –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º OpenAI GPT
- –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–π —á–∞—Ç –∑ –∞—Å–∏—Å—Ç–µ–Ω—Ç–∞–º–∏
- –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —ñ—Å—Ç–æ—Ä—ñ—ó –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
- –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –∞—É–¥—ñ–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π —á–µ—Ä–µ–∑ OpenAI TTS

### üßò –ú–µ–¥–∏—Ç–∞—Ü—ñ—ó

- –ü–µ—Ä—Å–æ–Ω–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –º–µ–¥–∏—Ç–∞—Ü—ñ—ó –Ω–∞ –æ—Å–Ω–æ–≤—ñ —Ü—ñ–ª–µ–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- –†—ñ–∑–Ω—ñ —Ç–∏–ø–∏ –º–µ–¥–∏—Ç–∞—Ü—ñ–π (—Ä–µ–ª–∞–∫—Å–∞—Ü—ñ—è, –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü—ñ—è, —Å–æ–Ω —Ç–æ—â–æ)
- –ú—É–∑–∏—á–Ω–µ —Å—É–ø—Ä–æ–≤–æ–¥–∂–µ–Ω–Ω—è –¥–ª—è –º–µ–¥–∏—Ç–∞—Ü—ñ–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –º–µ–¥–∏—Ç–∞—Ü—ñ–π —â–æ–¥–Ω—è —á–µ—Ä–µ–∑ cron jobs

### üë§ –°–∏—Å—Ç–µ–º–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

- –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –∑ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è–º OTP
- –ü—Ä–æ—Ñ—ñ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑ –æ—Å–æ–±–∏—Å—Ç–æ—é —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é
- –°–∏—Å—Ç–µ–º–∞ —ñ–Ω—Ç–µ—Ä–µ—Å—ñ–≤
- JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è

### üéµ –ê—É–¥—ñ–æ –∫–æ–Ω—Ç–µ–Ω—Ç

- –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –∞—É–¥—ñ–æ –∑ —Ç–µ–∫—Å—Ç—É —á–µ—Ä–µ–∑ ElevenLabs API
- –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Ç–∞ –≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞—É–¥—ñ–æ —Ñ–∞–π–ª—ñ–≤
- –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ OpenAI TTS

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó

- **Backend**: Node.js, Express.js
- **–ë–∞–∑–∞ –¥–∞–Ω–∏—Ö**: MongoDB –∑ Mongoose
- **AI**: OpenAI GPT-4, OpenAI TTS
- **–ê—É–¥—ñ–æ**: ElevenLabs API
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è**: JWT, bcrypt
- **Email**: Nodemailer
- **–®–∞–±–ª–æ–Ω—ñ–∑–∞—Ü—ñ—è**: EJS

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
backend-api/
‚îú‚îÄ‚îÄ assets/           # –°—Ç–∞—Ç–∏—á–Ω—ñ —Ñ–∞–π–ª–∏ (CSS, JS, –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è)
‚îú‚îÄ‚îÄ config/           # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
‚îú‚îÄ‚îÄ helps/            # –î–æ–ø–æ–º—ñ–∂–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó
‚îú‚îÄ‚îÄ media/            # –ê—É–¥—ñ–æ —Ñ–∞–π–ª–∏ –¥–ª—è –º–µ–¥–∏—Ç–∞—Ü—ñ–π
‚îú‚îÄ‚îÄ middleware/       # Express middleware
‚îú‚îÄ‚îÄ models/           # Mongoose –º–æ–¥–µ–ª—ñ
‚îú‚îÄ‚îÄ routes/           # API –º–∞—Ä—à—Ä—É—Ç–∏
‚îú‚îÄ‚îÄ services/         # –ë—ñ–∑–Ω–µ—Å –ª–æ–≥—ñ–∫–∞
‚îú‚îÄ‚îÄ views/            # EJS —à–∞–±–ª–æ–Ω–∏
‚îî‚îÄ‚îÄ index.js          # –¢–æ—á–∫–∞ –≤—Ö–æ–¥—É
```

## üîß –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

1. **–ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é**

   ```bash
   git clone <repository-url>
   cd mynd-nodejs  # –∞–±–æ –ø–µ—Ä–µ–π–º–µ–Ω—É–π—Ç–µ –ø–∞–ø–∫—É –Ω–∞ backend-api
   ```

2. **–í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π**

   ```bash
   npm install
   # –∞–±–æ
   yarn install
   ```

3. **–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞**

   –°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–µ–Ω—ñ –ø—Ä–æ–µ–∫—Ç—É:

   ```env
   # Database
   MONGODB_URI=mongodb://localhost:27017/ai_stories

   # Server
   PORT=5000
   HOST=127.0.0.1

   # OpenAI
   OPENAI_API_KEY=your_openai_api_key
   RESUME_PARSER_PORT=your_openai_api_key

   # ElevenLabs
   ELEVENLABS_API_KEY=your_elevenlabs_api_key

   # JWT
   JWT_SECRET=your_jwt_secret

   # Email
   EMAIL_USER=your_email@gmail.com
   EMAIL_PASS=your_email_password
   ```

4. **–ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞**

   ```bash
   # –†–æ–∑—Ä–æ–±–∫–∞ (–∑ nodemon)
   npm run start:dev

   # –ü—Ä–æ–¥–∞–∫—à–Ω
   npm start
   ```

## üì° API Endpoints

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è (`/api/auth`)

- `POST /register` - –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- `POST /verify-otp` - –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è OTP
- `POST /login` - –í—Ö—ñ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
- `POST /logout` - –í–∏—Ö—ñ–¥ –∑ —Å–∏—Å—Ç–µ–º–∏

### –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ (`/api/user`)

- `GET /profile` - –û—Ç—Ä–∏–º–∞–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é
- `PUT /profile` - –û–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é
- `GET /interests` - –û—Ç—Ä–∏–º–∞–Ω–Ω—è —ñ–Ω—Ç–µ—Ä–µ—Å—ñ–≤

### AI –ê—Å–∏—Å—Ç–µ–Ω—Ç–∏ (`/api/ai`)

- `POST /create-assistant` - –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞—Å–∏—Å—Ç–µ–Ω—Ç–∞
- `GET /assistants` - –°–ø–∏—Å–æ–∫ –∞—Å–∏—Å—Ç–µ–Ω—Ç—ñ–≤
- `POST /chat` - –ß–∞—Ç –∑ –∞—Å–∏—Å—Ç–µ–Ω—Ç–æ–º

### –ú–µ–¥–∏—Ç–∞—Ü—ñ—ó (`/api/meditation`)

- `GET /types` - –¢–∏–ø–∏ –º–µ–¥–∏—Ç–∞—Ü—ñ–π
- `GET /goals` - –¶—ñ–ª—ñ –º–µ–¥–∏—Ç–∞—Ü—ñ–π
- `GET /music` - –ú—É–∑–∏—á–Ω—ñ —Ç—Ä–µ–∫–∏
- `POST /generate` - –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –º–µ–¥–∏—Ç–∞—Ü—ñ—ó
- `GET /random` - –í–∏–ø–∞–¥–∫–æ–≤–∞ –º–µ–¥–∏—Ç–∞—Ü—ñ—è

## üóÑ –ú–æ–¥–µ–ª—ñ –¥–∞–Ω–∏—Ö

### User

- –û—Å–æ–±–∏—Å—Ç–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è (—ñ–º'—è, email, –¥–∞—Ç–∞ –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è)
- –°—Ç–∞—Ç—É—Å –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
- –Ü–Ω—Ç–µ—Ä–µ—Å–∏
- OTP –¥–ª—è –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è

### Assistant

- –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è AI –∞—Å–∏—Å—Ç–µ–Ω—Ç–∞
- Thread ID –¥–ª—è OpenAI
- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —Ç–∞ —ñ—Å—Ç–æ—Ä—ñ—è —á–∞—Ç—É

### Meditation

- –û–ø–∏—Å –º–µ–¥–∏—Ç–∞—Ü—ñ—ó
- –¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å
- –¢–∏–ø —Ç–∞ —Ü—ñ–ª—å –º–µ–¥–∏—Ç–∞—Ü—ñ—ó
- –ú—É–∑–∏—á–Ω–∏–π —Å—É–ø—Ä–æ–≤—ñ–¥
- –ê—É–¥—ñ–æ —ñ–Ω—Ç—Ä–æ

## üîÑ Cron Jobs

–ü—Ä–æ–µ–∫—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `node-cron` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—ó –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –º–µ–¥–∏—Ç–∞—Ü—ñ–π:

- –©–æ–¥–Ω—è –æ 00:00 –≥–µ–Ω–µ—Ä—É—î—Ç—å—Å—è 3 –≤–∏–ø–∞–¥–∫–æ–≤—ñ –º–µ–¥–∏—Ç–∞—Ü—ñ—ó

## üéØ –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ

1. **–ü–µ—Ä—Å–æ–Ω–∞–ª—ñ–∑–∞—Ü—ñ—è**: –ú–µ–¥–∏—Ç–∞—Ü—ñ—ó –∞–¥–∞–ø—Ç—É—é—Ç—å—Å—è –ø—ñ–¥ —ñ–Ω—Ç–µ—Ä–µ—Å–∏ —Ç–∞ —Ü—ñ–ª—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
2. **AI —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è**: –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è OpenAI –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ–Ω—Ç–µ–Ω—Ç—É
3. **–ê—É–¥—ñ–æ –∫–æ–Ω—Ç–µ–Ω—Ç**: –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ç–∞ –≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞—É–¥—ñ–æ —á–µ—Ä–µ–∑ API
4. **–ë–µ–∑–ø–µ–∫–∞**: JWT —Ç–æ–∫–µ–Ω–∏ —Ç–∞ bcrypt –¥–ª—è —Ö–µ—à—É–≤–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤
5. **–ú–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω—ñ—Å—Ç—å**: –ú–æ–¥—É–ª—å–Ω–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –∑ —á—ñ—Ç–∫–æ—é —Å—Ç—Ä—É–∫—Ç—É—Ä–æ—é

## üöß –†–æ–∑—Ä–æ–±–∫–∞

### –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö –º–æ–¥–µ–ª–µ–π

1. –°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª –≤ `models/`
2. –í–∏–∑–Ω–∞—á—Ç–µ —Å—Ö–µ–º—É Mongoose
3. –ï–∫—Å–ø–æ—Ä—Ç—É–π—Ç–µ –º–æ–¥–µ–ª—å

### –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö API endpoints

1. –°—Ç–≤–æ—Ä—ñ—Ç—å –∞–±–æ –æ–Ω–æ–≤—ñ—Ç—å —Ñ–∞–π–ª –≤ `routes/`
2. –î–æ–¥–∞–π—Ç–µ middleware –≤ `middleware/` —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ
3. –ü—ñ–¥–∫–ª—é—á—ñ—Ç—å –º–∞—Ä—à—Ä—É—Ç –≤ `index.js`

### –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

```bash
# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ –≤ —Ä–µ–∂–∏–º—ñ —Ä–æ–∑—Ä–æ–±–∫–∏
npm run start:dev

# –°–µ—Ä–≤–µ—Ä –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π –Ω–∞ http://127.0.0.1:5000
```

## üìù –õ—ñ—Ü–µ–Ω–∑—ñ—è

ISC

## üë• –ê–≤—Ç–æ—Ä–∏

Platinum Web Studio
